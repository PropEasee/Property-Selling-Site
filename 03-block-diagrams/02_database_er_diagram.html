<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PropEase - Database ER Diagram</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            padding: 20px;
            background: #f5f5f5;
            margin: 0;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            text-align: center;
            color: #2563eb;
            margin-bottom: 30px;
        }
        svg {
            width: 100%;
            height: auto;
        }
        .table {
            fill: #fff;
            stroke: #2563eb;
            stroke-width: 2;
        }
        .table-header {
            fill: #2563eb;
        }
        .relationship {
            stroke: #dc2626;
            stroke-width: 2;
            fill: none;
            marker-end: url(#arrowhead);
        }
        text {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            font-size: 13px;
        }
        .table-name {
            fill: white;
            font-weight: bold;
            font-size: 15px;
        }
        .pk { fill: #059669; font-weight: bold; }
        .fk { fill: #dc2626; font-weight: bold; }
        .attr { fill: #374151; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üóÑÔ∏è PropEase - Database Schema (ER Diagram)</h1>
        <svg viewBox="0 0 1400 1100" xmlns="http://www.w3.org/2000/svg">
            <defs>
                <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                    <polygon points="0 0, 10 3, 0 6" fill="#dc2626" />
                </marker>
            </defs>
            
            <!-- Title -->
            <text x="700" y="30" text-anchor="middle" style="font-size: 22px; font-weight: bold; fill: #1e40af;">
                DATABASE ENTITY-RELATIONSHIP DIAGRAM
            </text>
            
            <!-- USERS Table -->
            <g id="users-table">
                <rect x="50" y="80" width="280" height="280" class="table" rx="8"/>
                <rect x="50" y="80" width="280" height="40" class="table-header" rx="8"/>
                <text x="190" y="105" text-anchor="middle" class="table-name">USERS</text>
                
                <text x="70" y="140" class="pk">PK  user_id</text>
                <text x="250" y="140" class="attr">BIGINT</text>
                <text x="70" y="165" class="attr">UQ  email</text>
                <text x="250" y="165" class="attr">VARCHAR(100)</text>
                <text x="70" y="190" class="attr">    password</text>
                <text x="250" y="190" class="attr">VARCHAR(255)</text>
                <text x="70" y="215" class="attr">    name</text>
                <text x="250" y="215" class="attr">VARCHAR(100)</text>
                <text x="70" y="240" class="attr">    phone</text>
                <text x="250" y="240" class="attr">VARCHAR(15)</text>
                <text x="70" y="265" class="attr">    role</text>
                <text x="250" y="265" class="attr">ENUM</text>
                <text x="70" y="290" class="attr">    created_at</text>
                <text x="250" y="290" class="attr">TIMESTAMP</text>
                <text x="70" y="340" style="font-size: 11px; fill: #6b7280;">
                    Role: ADMIN, SELLER, BUYER
                </text>
            </g>
            
            <!-- PROPERTIES Table -->
            <g id="properties-table">
                <rect x="560" y="80" width="320" height="350" class="table" rx="8"/>
                <rect x="560" y="80" width="320" height="40" class="table-header" rx="8"/>
                <text x="720" y="105" text-anchor="middle" class="table-name">PROPERTIES</text>
                
                <text x="580" y="140" class="pk">PK  property_id</text>
                <text x="800" y="140" class="attr">BIGINT</text>
                <text x="580" y="165" class="fk">FK  seller_id</text>
                <text x="800" y="165" class="attr">BIGINT</text>
                <text x="580" y="190" class="attr">    title</text>
                <text x="800" y="190" class="attr">VARCHAR(200)</text>
                <text x="580" y="215" class="attr">    description</text>
                <text x="800" y="215" class="attr">TEXT</text>
                <text x="580" y="240" class="attr">    price</text>
                <text x="800" y="240" class="attr">DECIMAL(12,2)</text>
                <text x="580" y="265" class="attr">    city</text>
                <text x="800" y="265" class="attr">VARCHAR(50)</text>
                <text x="580" y="290" class="attr">    state</text>
                <text x="800" y="290" class="attr">VARCHAR(50)</text>
                <text x="580" y="315" class="attr">    pincode</text>
                <text x="800" y="315" class="attr">VARCHAR(10)</text>
                <text x="580" y="340" class="attr">    property_type</text>
                <text x="800" y="340" class="attr">ENUM</text>
                <text x="580" y="365" class="attr">    status</text>
                <text x="800" y="365" class="attr">ENUM</text>
                <text x="580" y="390" class="attr">    created_at</text>
                <text x="800" y="390" class="attr">TIMESTAMP</text>
                <text x="580" y="415" style="font-size: 11px; fill: #6b7280;">
                    Type: APARTMENT, HOUSE, VILLA, LAND
                </text>
            </g>
            
            <!-- PROPERTY_IMAGES Table -->
            <g id="images-table">
                <rect x="1050" y="80" width="300" height="200" class="table" rx="8"/>
                <rect x="1050" y="80" width="300" height="40" class="table-header" rx="8"/>
                <text x="1200" y="105" text-anchor="middle" class="table-name">PROPERTY_IMAGES</text>
                
                <text x="1070" y="140" class="pk">PK  image_id</text>
                <text x="1280" y="140" class="attr">BIGINT</text>
                <text x="1070" y="165" class="fk">FK  property_id</text>
                <text x="1280" y="165" class="attr">BIGINT</text>
                <text x="1070" y="190" class="attr">    image_url</text>
                <text x="1280" y="190" class="attr">VARCHAR(500)</text>
                <text x="1070" y="215" class="attr">    created_at</text>
                <text x="1280" y="215" class="attr">TIMESTAMP</text>
                <text x="1070" y="255" style="font-size: 11px; fill: #6b7280;">
                    Stores Cloudinary CDN URLs
                </text>
            </g>
            
            <!-- ENQUIRIES Table -->
            <g id="enquiries-table">
                <rect x="560" y="480" width="320" height="250" class="table" rx="8"/>
                <rect x="560" y="480" width="320" height="40" class="table-header" rx="8"/>
                <text x="720" y="505" text-anchor="middle" class="table-name">ENQUIRIES</text>
                
                <text x="580" y="540" class="pk">PK  enquiry_id</text>
                <text x="800" y="540" class="attr">BIGINT</text>
                <text x="580" y="565" class="fk">FK  property_id</text>
                <text x="800" y="565" class="attr">BIGINT</text>
                <text x="580" y="590" class="fk">FK  buyer_id</text>
                <text x="800" y="590" class="attr">BIGINT</text>
                <text x="580" y="615" class="attr">    message</text>
                <text x="800" y="615" class="attr">TEXT</text>
                <text x="580" y="640" class="attr">    status</text>
                <text x="800" y="640" class="attr">ENUM</text>
                <text x="580" y="665" class="attr">    created_at</text>
                <text x="800" y="665" class="attr">TIMESTAMP</text>
                <text x="580" y="705" style="font-size: 11px; fill: #6b7280;">
                    Status: OPEN, RESPONDED, CLOSED
                </text>
            </g>
            
            <!-- PROPERTY_LIKES Table -->
            <g id="likes-table">
                <rect x="50" y="480" width="300" height="220" class="table" rx="8"/>
                <rect x="50" y="480" width="300" height="40" class="table-header" rx="8"/>
                <text x="200" y="505" text-anchor="middle" class="table-name">PROPERTY_LIKES</text>
                
                <text x="70" y="540" class="pk">PK  like_id</text>
                <text x="280" y="540" class="attr">BIGINT</text>
                <text x="70" y="565" class="fk">FK  buyer_id</text>
                <text x="280" y="565" class="attr">BIGINT</text>
                <text x="70" y="590" class="fk">FK  property_id</text>
                <text x="280" y="590" class="attr">BIGINT</text>
                <text x="70" y="615" class="attr">    liked_at</text>
                <text x="280" y="615" class="attr">TIMESTAMP</text>
                <text x="70" y="655" style="font-size: 11px; fill: #6b7280; font-weight: bold;">
                    UNIQUE (buyer_id, property_id)
                </text>
                <text x="70" y="675" style="font-size: 11px; fill: #6b7280;">
                    Wishlist/Favorites feature
                </text>
            </g>
            
            <!-- PROPERTY_VIEWS Table -->
            <g id="views-table">
                <rect x="1050" y="350" width="300" height="220" class="table" rx="8"/>
                <rect x="1050" y="350" width="300" height="40" class="table-header" rx="8"/>
                <text x="1200" y="375" text-anchor="middle" class="table-name">PROPERTY_VIEWS</text>
                
                <text x="1070" y="410" class="pk">PK  view_id</text>
                <text x="1280" y="410" class="attr">BIGINT</text>
                <text x="1070" y="435" class="fk">FK  property_id</text>
                <text x="1280" y="435" class="attr">BIGINT</text>
                <text x="1070" y="460" class="fk">FK  user_id</text>
                <text x="1280" y="460" class="attr">BIGINT</text>
                <text x="1070" y="485" class="attr">    viewed_at</text>
                <text x="1280" y="485" class="attr">TIMESTAMP</text>
                <text x="1070" y="525" style="font-size: 11px; fill: #6b7280; font-weight: bold;">
                    UNIQUE (property_id, user_id)
                </text>
                <text x="1070" y="545" style="font-size: 11px; fill: #6b7280;">
                    Analytics tracking
                </text>
            </g>
            
            <!-- Relationships -->
            
            <!-- Users (seller) -> Properties -->
            <path d="M 330 200 L 560 200" class="relationship"/>
            <text x="420" y="190" style="font-size: 12px; fill: #dc2626; font-weight: bold;">
                1 SELLER ‚Üí Many PROPERTIES
            </text>
            
            <!-- Properties -> Property_Images -->
            <path d="M 880 180 L 1050 180" class="relationship"/>
            <text x="930" y="170" style="font-size: 12px; fill: #dc2626; font-weight: bold;">
                1 Property ‚Üí Many Images
            </text>
            
            <!-- Properties -> Enquiries -->
            <path d="M 720 430 L 720 480" class="relationship"/>
            <text x="735" y="460" style="font-size: 12px; fill: #dc2626; font-weight: bold;">
                1 Property ‚Üí Many Enquiries
            </text>
            
            <!-- Users (buyer) -> Enquiries -->
            <path d="M 190 360 L 190 420 L 560 420 L 560 565" class="relationship"/>
            <text x="200" y="410" style="font-size: 12px; fill: #dc2626; font-weight: bold;">
                1 BUYER ‚Üí Many Enquiries
            </text>
            
            <!-- Users (buyer) -> Property_Likes -->
            <path d="M 190 360 L 190 480" class="relationship"/>
            <text x="210" y="420" style="font-size: 12px; fill: #dc2626; font-weight: bold;">
                1 BUYER ‚Üí Many Likes
            </text>
            
            <!-- Properties -> Property_Likes -->
            <path d="M 560 350 L 400 350 L 400 590 L 350 590" class="relationship"/>
            <text x="420" y="465" style="font-size: 12px; fill: #dc2626; font-weight: bold;">
                1 Property ‚Üí Many Likes
            </text>
            
            <!-- Properties -> Property_Views -->
            <path d="M 880 300 L 950 300 L 950 435 L 1050 435" class="relationship"/>
            <text x="910" y="375" style="font-size: 12px; fill: #dc2626; font-weight: bold;">
                1 Property ‚Üí Many Views
            </text>
            
            <!-- Users -> Property_Views -->
            <path d="M 330 150 L 1000 150 L 1000 435 L 1050 435" class="relationship"/>
            <text x="650" y="140" style="font-size: 12px; fill: #dc2626; font-weight: bold;">
                1 USER ‚Üí Many Views
            </text>
            
            <!-- Cascade Info -->
            <rect x="50" y="780" width="1300" height="130" class="table" style="fill: #fef3c7; stroke: #f59e0b;"/>
            <text x="700" y="810" text-anchor="middle" style="font-size: 16px; font-weight: bold; fill: #92400e;">
                CASCADE & CONSTRAINTS
            </text>
            <text x="70" y="840" style="font-size: 13px; fill: #374151;">
                ‚Ä¢ When a PROPERTY is deleted ‚Üí All related IMAGES, ENQUIRIES, LIKES, and VIEWS are automatically deleted (CASCADE)
            </text>
            <text x="70" y="865" style="font-size: 13px; fill: #374151;">
                ‚Ä¢ When a USER is deleted ‚Üí All their PROPERTIES (if seller), ENQUIRIES (if buyer), LIKES (if buyer) are deleted
            </text>
            <text x="70" y="890" style="font-size: 13px; fill: #374151;">
                ‚Ä¢ UNIQUE constraints prevent duplicate likes (buyer can't like same property twice) and duplicate views
            </text>
            
            <!-- Legend -->
            <rect x="50" y="940" width="1300" height="140" class="table" style="fill: #f0f9ff; stroke: #2563eb;"/>
            <text x="700" y="970" text-anchor="middle" style="font-size: 16px; font-weight: bold; fill: #1e40af;">
                DATA TYPES & ENUMS
            </text>
            <text x="70" y="1000" style="font-size: 13px;">
                <tspan style="font-weight: bold; fill: #059669;">ROLE:</tspan> ADMIN, SELLER, BUYER
            </text>
            <text x="70" y="1025" style="font-size: 13px;">
                <tspan style="font-weight: bold; fill: #059669;">PROPERTY_TYPE:</tspan> APARTMENT, HOUSE, VILLA, LAND
            </text>
            <text x="70" y="1050" style="font-size: 13px;">
                <tspan style="font-weight: bold; fill: #059669;">STATUS:</tspan> AVAILABLE, PENDING, SOLD
            </text>
            
            <text x="700" y="1000" style="font-size: 13px;">
                <tspan style="font-weight: bold; fill: #059669;">ENQUIRY_STATUS:</tspan> OPEN, RESPONDED, CLOSED
            </text>
            <text x="700" y="1025" style="font-size: 13px;">
                <tspan style="font-weight: bold; fill: #dc2626;">Password Encryption:</tspan> BCrypt (strength 10)
            </text>
            <text x="700" y="1050" style="font-size: 13px;">
                <tspan style="font-weight: bold; fill: #7c3aed;">Image URLs:</tspan> Cloudinary CDN (https://res.cloudinary.com/...)
            </text>
        </svg>
    </div>
</body>
</html>
